{
  "name": "HorseScript",
  "scopeName": "source.horsescript",
  "patterns": [
    {
      "include": "#expression"
    }
  ],
  "repository": {
    "expression": {
      "patterns": [
        {
          "include": "#functions"
        },
        {
          "include": "#magicstrings"
        },
        {
          "include": "#fieldsubprops"
        },
        {
          "include": "#operators"
        },
        {
          "include": "#classes"
        },
        {
          "include": "#fieldvalues"
        },
        {
          "include": "#fieldmetadata"
        },
        {
          "include": "#strings"
        },
        {
          "include": "#constants"
        },
        {
          "include": "#punctuation"
        },
        {
          "include": "#default"
        }
      ]
    },
    "functions": {
      "patterns": [
        {
          "match": "\\btoString(?=\\()\\b",
          "name": "entity.name.function.tostring.horsescript"
        },
        {
          "match": "\\bNumber(?=\\()\\b",
          "name": "entity.name.function.number.horsescript"
        },
        {
          "match": "\\bDate(?=\\()\\b",
          "name": "entity.name.function.date.horsescript"
        },
        {
          "match": "\\bcos(?=\\()\\b",
          "name": "entity.name.function.cos.horsescript"
        },
        {
          "match": "\\bsin(?=\\()\\b",
          "name": "entity.name.function.sin.horsescript"
        },
        {
          "match": "\\btoLocaleString(?=\\()\\b",
          "name": "entity.name.function.tolocalestring.horsescript"
        },
        {
          "match": "\\btoLocaleDateString(?=\\()\\b",
          "name": "entity.name.function.tolocaledatestring.horsescript"
        },
        {
          "match": "\\btoLocaleTimeString(?=\\()\\b",
          "name": "entity.name.function.tolocaletimestring.horsescript"
        },
        {
          "match": "\\bindexOf(?=\\()\\b",
          "name": "entity.name.function.indexof.horsescript"
        },
        {
          "match": "\\btoLowerCase(?=\\()\\b",
          "name": "entity.name.function.tolowercase.horsescript"
        },
        {
          "match": "\\bjoin(?=\\()\\b",
          "name": "entity.name.function.join.horsescript"
        },
        {
          "match": "\\blength(?=\\()\\b",
          "name": "entity.name.function.length.horsescript"
        },
        {
          "match": "\\babs(?=\\()\\b",
          "name": "entity.name.function.abs.horsescript"
        },
        {
          "match": "\\bloopIndex(?=\\()\\b",
          "name": "entity.name.function.loopindex.horsescript"
        },
        {
          "match": "\\bfloor(?=\\()\\b",
          "name": "entity.name.function.floor.horsescript"
        },
        {
          "match": "\\bceiling(?=\\()\\b",
          "name": "entity.name.function.ceiling.horsescript"
        },
        {
          "match": "\\bpow(?=\\()\\b",
          "name": "entity.name.function.pow.horsescript"
        },
        {
          "match": "\\bsubstring(?=\\()\\b",
          "name": "entity.name.function.substring.horsescript"
        },
        {
          "match": "\\bgetDate(?=\\()\\b",
          "name": "entity.name.function.getdate.horsescript"
        },
        {
          "match": "\\bgetMonth(?=\\()\\b",
          "name": "entity.name.function.getmonth.horsescript"
        },
        {
          "match": "\\bgetYear(?=\\()\\b",
          "name": "entity.name.function.getyear.horsescript"
        },
        {
          "match": "\\btoUpperCase(?=\\()\\b",
          "name": "entity.name.function.touppercase.horsescript"
        },
        {
          "match": "\\blastIndexOf(?=\\()\\b",
          "name": "entity.name.function.lastindexof.horsescript"
        },
        {
          "match": "\\bstartsWith(?=\\()\\b",
          "name": "entity.name.function.startswith.horsescript"
        },
        {
          "match": "\\bendsWith(?=\\()\\b",
          "name": "entity.name.function.endswith.horsescript"
        },
        {
          "match": "\\breplace(?=\\()\\b",
          "name": "entity.name.function.replace.horsescript"
        },
        {
          "match": "\\breplaceAll(?=\\()\\b",
          "name": "entity.name.function.replaceall.horsescript"
        },
        {
          "match": "\\bpadStart(?=\\()\\b",
          "name": "entity.name.function.padstart.horsescript"
        },
        {
          "match": "\\bpadEnd(?=\\()\\b",
          "name": "entity.name.function.padend.horsescript"
        },
        {
          "match": "\\bgetThumbnailImage(?=\\()\\b",
          "name": "entity.name.function.getthumbnailimage.horsescript"
        },
        {
          "match": "\\bgetUserImage(?=\\()\\b",
          "name": "entity.name.function.getuserimage.horsescript"
        },
        {
          "match": "\\baddDays(?=\\()\\b",
          "name": "entity.name.function.adddays.horsescript"
        },
        {
          "match": "\\baddMinutes(?=\\()\\b",
          "name": "entity.name.function.addminutes.horsescript"
        },
        {
          "match": "\\bappendTo(?=\\()\\b",
          "name": "entity.name.function.appendto.horsescript"
        },
        {
          "match": "\\bremoveFrom(?=\\()\\b",
          "name": "entity.name.function.removefrom.horsescript"
        },
        {
          "match": "\\bsplit(?=\\()\\b",
          "name": "entity.name.function.split.horsescript"
        }
      ]
    },
    "magicstrings": {
      "patterns": [
        {
          "match": "(?<=\\W|^)@currentField(?=\\W|$)",
          "name": "variable.language.currentweb.horsescript"
        },
        {
          "match": "(?<=\\W|^)@currentWeb(?=\\W|$)",
          "name": "variable.language.currentweb.horsescript"
        },
        {
          "match": "(?<=\\W|^)@me(?=\\W|$)",
          "name": "variable.language.me.horsescript"
        },
        {
          "match": "(?<=\\W|^)@now(?=\\W|$)",
          "name": "variable.language.now.horsescript"
        },
        {
          "match": "(?<=\\W|^)@rowIndex(?=\\W|$)",
          "name": "variable.language.rowindex.horsescript"
        },
        {
          "match": "(?<=\\W|^)@window(?=\\.(innerHeight|innerWidth)\\b)",
          "name": "variable.language.window.horsescript"
        },
        {
          "match": "(?<=\\W|^@window\\.)innerHeight(?=\\W|$)",
          "name": "support.constant.window.innerheight.horsescript"
        },
        {
          "match": "(?<=\\W|^@window\\.)innerWidth(?=\\W|$)",
          "name": "support.constant.window.innerwidth.horsescript"
        },
        {
          "match": "(?<=\\W|^)@isSelected(?=\\W|$)",
          "name": "variable.language.isselected.horsescript"
        },
        {
          "match": "(?<=\\W|^)@lcid(?=\\W|$)",
          "name": "variable.language.lcid.horsescript"
        },
        {
          "match": "(?<=\\W|^)@UIlcid(?=\\W|$)",
          "name": "variable.language.uilcid.horsescript"
        },
        {
          "match": "(?<=@thumbnail\\.)small(?=\\W|$)",
          "name": "support.constant.thumbnail.size.horsescript"
        },
        {
          "match": "(?<=@thumbnail\\.)medium(?=\\W|$)",
          "name": "support.constant.thumbnail.size.horsescript"
        },
        {
          "match": "(?<=@thumbnail\\.)large(?=\\W|$)",
          "name": "support.constant.thumbnail.size.horsescript"
        },
        {
          "match": "(?<=@thumbnail\\.)\\d+(x\\d+)?(?=\\W|$)",
          "name": "constant.numeric.thumbnail.dimensions.horsescript"
        },
        {
          "match": "(?<=\\W|^)@thumbnail(?=\\.(small|medium|large|\\d+(x\\d+)?)\\b)",
          "name": "variable.language.thumbnail.horsescript"
        }
      ]
    },
    "fieldsubprops": {
      "patterns": [
        {
          "match": "(?<=@currentField\\.)title(?=\\W|$)",
          "name": "support.constant.person.title.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)email(?=\\W|$)",
          "name": "support.constant.person.email.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)sip(?=\\W|$)",
          "name": "support.constant.person.sip.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)picture(?=\\W|$)",
          "name": "support.constant.person.picture.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)department(?=\\W|$)",
          "name": "support.constant.person.department.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)jobTitle(?=\\W|$)",
          "name": "support.constant.person.jobtitle.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)DisplayName(?=\\W|$)",
          "name": "support.constant.location.displayname.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)LocationUri(?=\\W|$)",
          "name": "support.constant.location.locationuri.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)Address(?=\\.(City|CountryOrRegion|State|Street)\\b)",
          "name": "variable.language.location.address.horsescript"
        },
        {
          "match": "(?<=@currentField\\.Address\\.)City(?=\\W|$)",
          "name": "support.constant.location.address.city.horsescript"
        },
        {
          "match": "(?<=@currentField\\.Address\\.)CountryOrRegion(?=\\W|$)",
          "name": "support.constant.location.address.countryorregion.horsescript"
        },
        {
          "match": "(?<=@currentField\\.Address\\.)State(?=\\W|$)",
          "name": "support.constant.location.address.state.horsescript"
        },
        {
          "match": "(?<=@currentField\\.Address\\.)Street(?=\\W|$)",
          "name": "support.constant.location.address.street.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)Coordinates(?=\\.(Latitude|Longitude)\\b)",
          "name": "variable.language.location.coordinates.horsescript"
        },
        {
          "match": "(?<=@currentField\\.Coordinates\\.)Latitude(?=\\W|$)",
          "name": "support.constant.location.coordinates.latitude.horsescript"
        },
        {
          "match": "(?<=@currentField\\.Coordinates\\.)Longitude(?=\\W|$)",
          "name": "support.constant.location.coordinates.longitude.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)lookupId(?=\\W|$)",
          "name": "support.constant.lookup.lookupid.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)lookupValue(?=\\W|$)",
          "name": "support.constant.lookup.lookupvalue.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)fileName(?=\\W|$)",
          "name": "support.constant.image.filename.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)serverRelativeUrl(?=\\W|$)",
          "name": "support.constant.image.serverrelativeurl.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)serverUrl(?=\\W|$)",
          "name": "support.constant.image.serverurl.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)thumbnailRenderer(?=\\.(spItemUrl|fileVersion|sponsorToken)\\b)",
          "name": "variable.language.image.thumbnailrenderer.horsescript"
        },
        {
          "match": "(?<=@currentField\\.thumbnailRenderer\\.)spItemUrl(?=\\W|$)",
          "name": "support.constant.image.thumbnailrenderer.spitemurl.horsescript"
        },
        {
          "match": "(?<=@currentField\\.thumbnailRenderer\\.)fileVersion(?=\\W|$)",
          "name": "support.constant.image.thumbnailrenderer.fileversion.horsescript"
        },
        {
          "match": "(?<=@currentField\\.thumbnailRenderer\\.)sponsorToken(?=\\W|$)",
          "name": "support.constant.image.thumbnailrenderer.sponsortoken.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)desc(?=\\W|$)",
          "name": "support.constant.hyperlink.desc.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)numeric(?=\\W|$)",
          "name": "support.constant.moderation.numeric.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)displayValue(?=\\W|$)",
          "name": "support.constant.field.displayvalue.horsescript"
        },
        {
          "match": "(?<=@currentField\\.)id(?=\\W|$)",
          "name": "support.constant.field.id.horsescript"
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "match": "\\b(?:if)\\b",
          "name": "keyword.control.conditional.horsescript"
        },
        {
          "match": "(\\+|-|/|\\*|%)",
          "name": "keyword.operator.arithmetic.horsescript"
        },
        {
          "match": "(==|!=|<=|<|>=|>|\\|\\||&&)",
          "name": "keyword.operator.logical.horsescript"
        }
      ]
    },
    "classes": {
      "patterns": [
        {
          "match": "'ms-bgColor-(red|redDark|yellow|yellowLight|themePrimary|themeSecondary)'",
          "name": "constant.other.horsescript"
        }
      ]
    },
    "fieldvalues": {
      "begin": "\\[\\$",
      "beginCaptures": {
        "0": {
          "name": "punctuation.section.brackets.begin.horsescript"
        }
      },
      "end": "\\]",
      "endCaptures": {
        "0": {
          "name": "punctuation.section.brackets.end.horsescript"
        }
      },
      "patterns": [
        {
          "match": "(?<=\\[\\$)[^~#%&*{}\\:<>?/+|\",.\\]]+",
          "name": "variable.parameter.field.horsescript"
        },
        {
          "match": "\\.",
          "name": "punctuation.accessor.horsescript"
        },
        {
          "match": "title(?=\\W|$)",
          "name": "support.constant.person.title.horsescript"
        },
        {
          "match": "email(?=\\W|$)",
          "name": "support.constant.person.email.horsescript"
        },
        {
          "match": "sip(?=\\W|$)",
          "name": "support.constant.person.sip.horsescript"
        },
        {
          "match": "picture(?=\\W|$)",
          "name": "support.constant.person.picture.horsescript"
        },
        {
          "match": "department(?=\\W|$)",
          "name": "support.constant.person.department.horsescript"
        },
        {
          "match": "jobTitle(?=\\W|$)",
          "name": "support.constant.person.jobtitle.horsescript"
        },
        {
          "match": "DisplayName(?=\\W|$)",
          "name": "support.constant.location.displayname.horsescript"
        },
        {
          "match": "LocationUri(?=\\W|$)",
          "name": "support.constant.location.locationuri.horsescript"
        },
        {
          "match": "Address(?=\\.(City|CountryOrRegion|State|Street)\\b)",
          "name": "variable.language.location.address.horsescript"
        },
        {
          "match": "(?<=\\.Address\\.)City(?=\\W|$)",
          "name": "support.constant.location.address.city.horsescript"
        },
        {
          "match": "(?<=\\.Address\\.)CountryOrRegion(?=\\W|$)",
          "name": "support.constant.location.address.countryorregion.horsescript"
        },
        {
          "match": "(?<=\\.Address\\.)State(?=\\W|$)",
          "name": "support.constant.location.address.state.horsescript"
        },
        {
          "match": "(?<=\\.Address\\.)Street(?=\\W|$)",
          "name": "support.constant.location.address.street.horsescript"
        },
        {
          "match": "Coordinates(?=\\.(Latitude|Longitude)\\b)",
          "name": "variable.language.location.coordinates.horsescript"
        },
        {
          "match": "(?<=\\.Coordinates\\.)Latitude(?=\\W|$)",
          "name": "support.constant.location.coordinates.latitude.horsescript"
        },
        {
          "match": "(?<=\\.Coordinates\\.)Longitude(?=\\W|$)",
          "name": "support.constant.location.coordinates.longitude.horsescript"
        },
        {
          "match": "lookupId(?=\\W|$)",
          "name": "support.constant.lookup.lookupid.horsescript"
        },
        {
          "match": "lookupValue(?=\\W|$)",
          "name": "support.constant.lookup.lookupvalue.horsescript"
        },
        {
          "match": "fileName(?=\\W|$)",
          "name": "support.constant.image.filename.horsescript"
        },
        {
          "match": "serverRelativeUrl(?=\\W|$)",
          "name": "support.constant.image.serverrelativeurl.horsescript"
        },
        {
          "match": "serverUrl(?=\\W|$)",
          "name": "support.constant.image.serverurl.horsescript"
        },
        {
          "match": "thumbnailRenderer(?=\\.(spItemUrl|fileVersion|sponsorToken)\\b)",
          "name": "variable.language.image.thumbnailrenderer.horsescript"
        },
        {
          "match": "(?<=\\.thumbnailRenderer\\.)spItemUrl(?=\\W|$)",
          "name": "support.constant.image.thumbnailrenderer.spitemurl.horsescript"
        },
        {
          "match": "(?<=\\.thumbnailRenderer\\.)fileVersion(?=\\W|$)",
          "name": "support.constant.image.thumbnailrenderer.fileversion.horsescript"
        },
        {
          "match": "(?<=\\.thumbnailRenderer\\.)sponsorToken(?=\\W|$)",
          "name": "support.constant.image.thumbnailrenderer.sponsortoken.horsescript"
        },
        {
          "match": "desc(?=\\W|$)",
          "name": "support.constant.hyperlink.desc.horsescript"
        },
        {
          "match": "numeric(?=\\W|$)",
          "name": "support.constant.moderation.numeric.horsescript"
        },
        {
          "match": "displayValue(?=\\W|$)",
          "name": "support.constant.field.displayvalue.horsescript"
        },
        {
          "match": "id(?=\\W|$)",
          "name": "support.constant.field.id.horsescript"
        }
      ]
    },
    "fieldmetadata": {
      "begin": "\\[\\!",
      "beginCaptures": {
        "0": {
          "name": "punctuation.section.brackets.begin.horsescript"
        }
      },
      "end": "\\]",
      "endCaptures": {
        "0": {
          "name": "punctuation.section.brackets.end.horsescript"
        }
      },
      "patterns": [
        {
          "match": "(?<=\\[\\!)[^~#%&*{}\\:<>?/+|\",.\\]]+",
          "name": "variable.parameter.field.horsescript"
        },
        {
          "match": "\\.",
          "name": "punctuation.accessor.horsescript"
        },
        {
          "match": "DisplayName(?=\\W|$)",
          "name": "support.constant.fieldmetadata.displayname.horsescript"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "begin": "'",
          "end": "'",
          "name": "string.quoted.single.horsescript"
        }
      ]
    },
    "constants": {
      "patterns": [
        {
          "match": "\\b(?:true|false)\\b",
          "name": "constant.language.boolean.horsescript"
        },
        {
          "match": "^=",
          "name": "support.constant.expressionprefix.horsescript"
        }
      ]
    },
    "punctuation": {
      "patterns": [
        {
          "match": ",",
          "name": "punctuation.separator.parameters.horsescript"
        },
        {
          "match": "\\(",
          "name": "punctuation.section.parens.begin.horsescript"
        },
        {
          "match": "\\)",
          "name": "punctuation.section.parens.end.horsescript"
        },
        {
          "match": "\\.",
          "name": "punctuation.accessor.horsescript"
        }
      ]
    },
    "default": {
      "match": ".",
      "name": "source.horsescript"
    }
  }
}